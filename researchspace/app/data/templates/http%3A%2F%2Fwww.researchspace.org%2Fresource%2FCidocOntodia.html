<mp-event-proxy id='clipboard-update-on-save-diagram' on-event-source='ontodia' on-event-type='Ontodia.DiagramSaved'
                proxy-event-type='Component.Refresh' proxy-targets='["clipboard-sidebar"]'
></mp-event-proxy>

<ol class="page-breadcrumb">
  <li><a title="Home" href="/">Home</a></li>
  <li>
    <semantic-link uri="http://www.researchspace.org/resource/MyDiagrams">My Diagrams</semantic-link>
  </li>
  <li class="active">
    New Diagram
  </li>
</ol>
[[!-- [[>rsp:ClipboardSidebar]] --]]
[[#>rsp:ClipboardSidebar]]
<div class="rs-page style--base">
  <div class="container-fluid">
    <div class="rs-page__top">
      <div class="row">
        <div class="rs-page__header-elements">
          <div style="margin-left:20px">
            <div class="sub-title">
              <h2 style="margin:0"><span class="icon-fc--header-title fa fa-sitemap"></span><small> New Detailed Diagram</small></h2>
            </div>
          </div>
        </div>
      </div><!--row-->
    </div><!--top-->
    <bs-row class="style--main style--border-top">
      <bs-col sm=12 style="height: calc(100vh - 104px)">
        [[#if (urlParam "warning")]]
          <bs-alert variant='warning'>
            <div>
              <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> You are editing a <b>Simplified</b> diagram in the <b>Detailed</b> mode! If you want to preserve the original diagram, please make a duplicate first!</div>
          </bs-alert>
        [[/if]]
        <ontodia id='ontodia' add-to-default-set=true
                 [[#if (urlParam "diagram")]]diagram="[[urlParam "diagram"]]"[[/if]]
                 [[#if (urlParam "instance")]]iri='[[urlParam "instance"]]'[[/if]]
                 [[> rsp:CidocOntodiaConfig ]]
        >
          [[> rsp:CidocOntodiaDataProviders]]

          <mp-workspace-layout>
            <mp-workspace-row>
              <mp-workspace-column
              	default-size=275
              	[[#if (hasPermission "sparql:update")]]
              		default-collapsed=false
              	[[else]]
              		default-collapsed=true
              	[[/if]]
              >
                <mp-workspace-item id='classes' heading='Classes'>
                  <ontodia-class-tree></ontodia-class-tree>
                </mp-workspace-item>
                <mp-workspace-item id='instances' heading='Instances'>
                  <ontodia-instances-search></ontodia-instances-search>
                </mp-workspace-item>
              </mp-workspace-column>
              <mp-workspace-item id='paper'>
                <ontodia-canvas node-templates='{
                   "http://www.ics.forth.gr/isl/CRMinf/I2_Belief": "{{> rsp:BeliefOntodiaTemplate}}",
                   "http://www.researchspace.org/ontology/Place": "{{> rsp:ItemOntodiaTemplate }}",
                   "http://www.researchspace.org/ontology/Thing": "{{> rsp:ItemOntodiaTemplate }}"
                 }'>
                  <ontodia-toolbar>
                    [[#if (hasPermission "sparql:update")]]
                    	[[!-- nothing --]]
                    [[else]]
                    	<div class='btn-group btn-group-sm'>
                        <button name='forceLayout' class='btn btn-secondary'><i class='fa fa-snowflake-o'></i></button>
                        <button name='clearAll' class='btn btn-secondary'><i class='fa fa-trash'></i> Clear All</button>
                        <button name='zoomIn' class='btn btn-secondary' title='Zoom in'><i class='fa fa-search-plus'></i></button>
                        <button name='zoomOut' class='btn btn-secondary' title='Zoom out'><i class='fa fa-search-minus'></i></button>
                        <button name='zoomToFit' class='btn btn-secondary' title='Fit to screen'><i class='fa fa-arrows-alt'></i></button>
                        <button name='exportPng' class='btn btn-secondary' title='Export diagram as PNG'><i class='fa fa-picture-o'></i> PNG</button>
                        <button name='exportSvg' class='btn btn-secondary' title='Export diagram as SVG'><i class='fa fa-picture-o'></i> SVG</button>
                        <button name='print' class='btn btn-secondary' title='Print diagram'><i class='fa fa-print'></i></button>
                      </div>
                    [[/if]]
                  </ontodia-toolbar>
                  <ontodia-halo></ontodia-halo>
                  <ontodia-halo-link></ontodia-halo-link>
                  <ontodia-navigator></ontodia-navigator>
                </ontodia-canvas>
              </mp-workspace-item>
              <mp-workspace-column default-size=275 default-collapsed=true>
                <mp-workspace-item id='connections' heading='Connections'>
                  <ontodia-connections></ontodia-connections>
                </mp-workspace-item>
              </mp-workspace-column>
            </mp-workspace-row>
          </mp-workspace-layout>
        </ontodia>
      </bs-col>
    </bs-row>
  </div>
</div>
[[/rsp:ClipboardSidebar]]
